@using c5m._2d6Dungeon;
<h3>Combat Screen</h3>

@if(creature == null)
{
    <CreaturePicker @bind-ParentCreature="creature"></CreaturePicker>
}
else{
    <FluentStack Orientation="Orientation.Vertical"  Width="100%" >
        <CombatTurnConsole @bind-actions="combatActions" @bind-TurnCounter="turnCounter" Shift="@player.Shift"></CombatTurnConsole>
        <FluentStack Orientation="Orientation.Horizontal" Width="100%">
            <FluentCard Width="600px"> 
                <AdventurerCard @bind-Player="player" Extented=true></AdventurerCard>
            </FluentCard>
            <FluentCard Width="400px">
                <QuickReferenceCombatCard @bind-TurnCounter="turnCounter"></QuickReferenceCombatCard>
            </FluentCard>
            <FluentCard Width="400px">
                <CreatureCard @bind-creature="creature"></CreatureCard> 
            </FluentCard>
        </FluentStack>
        <CombatJournal @bind-actions="combatActions" ></CombatJournal>
    </FluentStack>
}


@code {
    [Parameter]
    public Game.Adventurer player { get; set; }

    [Parameter] 
    public EventCallback<Game.Adventurer> PlayerChanged { get; set; }

    public IEnumerable<Creature>? creatures { get; set; }
    public Creature? creature { get; set; }

    private List<string> combatActions = new List<string>();

    private int turnCounter = 1;
    private int adjustmentShift = 0;


}
